const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C1vUyfCQ.js","assets/index-XqG0glKd.css"])))=>i.map(i=>d[i]);
import{c as B,u as V,r as n,_ as q,j as e,X as M,R as O,S as G,m as Q,b as L,l as D,i as P,E as W}from"./index-C1vUyfCQ.js";import{V as J,M as K}from"./video-N4oeYzIa.js";import{a as T,C as X}from"./chevron-right-D3-pFzu9.js";import{P as I}from"./plus-BmfMphyu.js";import{L as Z}from"./loader-circle-DtPnqPT2.js";import{H as Y}from"./hard-drive-CZcEZp5m.js";import{C as _}from"./clock-MPeAp-Gv.js";import{C as ee}from"./circle-check-Bi5EwR6H.js";import{P as A}from"./play-jUqxeKBo.js";import{F as te}from"./funnel-RlHzpJrz.js";import{E as se}from"./eye-Cs8wf1lg.js";import{S as re}from"./square-pen-BUd0AX2V.js";import{T as ae}from"./trash-2-z25SXtAG.js";import{I as le}from"./image-Bnhdpsne.js";import{S as ie}from"./save-C46eDZB8.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],ne=B("file-play",oe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],de=B("folder",ce),xe=({isOpen:u,onClose:l,onSelect:f,onSelectMultiple:y,multiSelect:p=!1})=>{const{t:$}=V(),[v,b]=n.useState([]),[S,j]=n.useState([]),[d,C]=n.useState(""),[r,o]=n.useState(!1),[w,E]=n.useState(null),[N,z]=n.useState(""),[x,k]=n.useState(new Set),m=n.useCallback(async(s=d)=>{o(!0),E(null);try{const{api:a}=await q(async()=>{const{api:g}=await import("./index-C1vUyfCQ.js").then(H=>H.J);return{api:g}},__vite__mapDeps([0,1])),c=await a.r2.listFiles(s);b(c.files||[]),j(c.folders||[]),C(c.prefix||"")}catch(a){console.error("Error fetching R2 files:",a),E(a.message)}finally{o(!1)}},[d]);n.useEffect(()=>{u&&m("")},[u]);const R=s=>{m(s)},U=()=>{if(!d)return;const s=d.split("/").filter(Boolean);s.pop();const a=s.length>0?s.join("/")+"/":"";m(a)},F=()=>{const s=t.map(a=>a.url);x.size===s.length?k(new Set):k(new Set([...Array.from(x),...s]))},t=n.useMemo(()=>v.filter(s=>s.name.toLowerCase().includes(N.toLowerCase())),[v,N]),i=s=>{if(s===0)return"0 B";const a=1024,c=["B","KB","MB","GB","TB"],g=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,g)).toFixed(2))+" "+c[g]},h=s=>new Date(s).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"});return u?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in",onClick:s=>s.target===s.currentTarget&&l(),children:e.jsxs("div",{className:"bg-[#0f172a] border border-white/10 rounded-[2rem] w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl relative",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-500/20 flex items-center justify-center",children:e.jsx(J,{className:"w-5 h-5 text-violet-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"متصفح ملفات R2"}),e.jsx("p",{className:"text-xs text-gray-400",children:"تصفح المجلدات واختر المحتوى"})]})]}),e.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-all shadow-inner",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"px-6 py-3 bg-white/[0.01] border-b border-white/5 flex items-center gap-2 overflow-x-auto whitespace-nowrap scrollbar-hide",children:[e.jsx("button",{onClick:()=>m(""),className:`text-sm ${d?"text-gray-400 hover:text-white":"text-violet-400 font-bold"}`,children:"الرئيسية"}),d.split("/").filter(Boolean).map((s,a,c)=>e.jsxs(O.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 text-gray-600 rtl:rotate-0 rotate-180"}),e.jsx("button",{onClick:()=>m(c.slice(0,a+1).join("/")+"/"),className:`text-sm ${a===c.length-1?"text-violet-400 font-bold":"text-gray-400 hover:text-white"}`,children:s})]},a))]}),e.jsxs("div",{className:"p-4 bg-white/[0.01] border-b border-white/5 flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(G,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"ابحث في هذا المجلد...",value:N,onChange:s=>z(s.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl py-2.5 pr-11 pl-4 text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 transition-colors text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[d&&e.jsx("button",{onClick:U,className:"p-2.5 rounded-xl bg-white/5 border border-white/10 text-gray-400 hover:text-white hover:bg-white/10 transition-all",title:"المجلد السابق",children:e.jsx(X,{className:"w-5 h-5 rtl:rotate-0 rotate-180"})}),e.jsx("button",{onClick:()=>m(),disabled:r,className:"p-2.5 rounded-xl bg-white/5 border border-white/10 text-gray-400 hover:text-white hover:bg-white/10 transition-all disabled:opacity-50",title:"تحديث",children:e.jsx(Q,{className:`w-5 h-5 ${r?"animate-spin":""}`})}),p&&v.length>0&&e.jsxs("button",{onClick:F,className:"px-4 py-2.5 rounded-xl bg-emerald-600/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-600/30 transition-all text-sm font-bold flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:x.size===v.length?"إلغاء تحديد الكل":"تحديد كل المجلد"})]}),p&&x.size>0&&e.jsx("button",{onClick:()=>{y==null||y(Array.from(x)),l()},className:"px-6 py-2.5 rounded-xl bg-violet-600 text-white font-bold hover:bg-violet-500 transition-all flex items-center gap-2 shadow-lg shadow-violet-600/20",children:e.jsxs("span",{children:["إضافة ",x.size," محاضرة"]})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar min-h-[400px]",children:r?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-4 py-20 text-gray-400",children:[e.jsx(Z,{className:"w-10 h-10 animate-spin text-violet-500"}),e.jsx("p",{className:"animate-pulse",children:"جاري جلب الملفات..."})]}):w?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-4 py-20 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mb-2",children:e.jsx(M,{className:"w-8 h-8 text-red-500"})}),e.jsx("h4",{className:"text-lg font-bold text-white",children:"خطأ في الاتصال بالسيرفر"}),e.jsx("p",{className:"text-gray-400 max-w-md",children:w}),e.jsx("button",{onClick:()=>m(),className:"mt-4 px-6 py-2 rounded-xl bg-violet-600 text-white",children:"تحديث"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[S.map((s,a)=>e.jsxs("div",{onClick:()=>R(s.path),className:"group glass-panel p-4 rounded-2xl transition-all cursor-pointer flex gap-4 border border-white/5 hover:border-violet-500/50 bg-white/[0.02]",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-amber-500/10 flex items-center justify-center flex-shrink-0 group-hover:bg-amber-500/20 transition-colors",children:e.jsx(de,{className:"w-7 h-7 text-amber-500"})}),e.jsx("div",{className:"flex-1 min-w-0 flex items-center",children:e.jsx("h4",{className:"font-bold text-white truncate text-sm",title:s.name,children:s.name.split("/").filter(Boolean).pop()})}),e.jsx("div",{className:"flex items-center text-gray-400 group-hover:text-white transition-colors",children:e.jsx(T,{className:"w-5 h-5 rtl:rotate-0 rotate-180"})})]},`folder-${a}`)),t.map(s=>e.jsxs("div",{onClick:()=>{p?k(a=>{const c=new Set(a);return c.has(s.url)?c.delete(s.url):c.add(s.url),new Set(c)}):(f(s.url),l())},className:`group glass-panel p-4 rounded-2xl transition-all cursor-pointer flex gap-4 overflow-hidden relative border bg-white/[0.02] ${x.has(s.url)?"border-violet-500 bg-violet-500/5":"border-white/5 hover:border-violet-500/50"}`,children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-violet-500/10 flex items-center justify-center flex-shrink-0 group-hover:bg-violet-500/20 transition-colors",children:s.fullName.toLowerCase().endsWith(".mp3")||s.fullName.toLowerCase().endsWith(".wav")?e.jsx(K,{className:"w-7 h-7 text-violet-400"}):e.jsx(ne,{className:"w-7 h-7 text-violet-400"})}),e.jsxs("div",{className:"flex-1 min-w-0 pr-1",children:[e.jsx("h4",{className:"font-bold text-white truncate text-sm mb-1",title:s.name,children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),i(s.size)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),h(s.lastModified)]})]})]}),e.jsx("div",{className:`absolute left-4 top-1/2 -translate-y-1/2 transition-opacity ${x.has(s.url)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx(ee,{className:`w-6 h-6 ${x.has(s.url)?"text-violet-500":"text-emerald-500"}`})})]},s.id))]})}),e.jsx("div",{className:"p-4 border-t border-white/5 text-center bg-black/40",children:e.jsx("p",{className:"text-[10px] text-gray-500",children:d?`المجلد الحالي: ${d}`:"تصفح الملفات المرفوعة على R2"})})]})}):null},Ee=({onPreview:u})=>{var U,F;const{t:l}=V(),[f,y]=n.useState([]),[p,$]=n.useState(""),[v,b]=n.useState(!1),[S,j]=n.useState(!1),[d,C]=n.useState(null),[r,o]=n.useState({title:"",instructor:"",duration:"",category:"Quran",status:"published",thumbnail:"https://images.unsplash.com/photo-1542816417-0983c9c9ad53?w=400&h=225&fit=crop"});n.useEffect(()=>{w()},[]);const w=async()=>{const t=await L.getCourses();y(t)},E=t=>{$(t.target.value)},N=f.filter(t=>t.title.toLowerCase().includes(p.toLowerCase())||t.instructor.toLowerCase().includes(p.toLowerCase())),z=async t=>{if(window.confirm("هل أنت متأكد من حذف هذه الدورة؟"))try{await L.deleteCourse(t),w()}catch(i){console.error("Failed to delete course:",i),alert(`فشل الحذف: ${i.message}`)}},x=t=>{C(t.id),o({title:t.title,instructor:t.instructor,duration:t.duration,category:t.category,status:"published",thumbnail:t.thumbnail,videoUrl:t.videoUrl}),b(!0)},k=async t=>{t.preventDefault();try{if(d)await L.updateCourse(d,{title:r.title,instructor:r.instructor,duration:r.duration,category:r.category,thumbnail:r.thumbnail,videoUrl:r.videoUrl});else{const i={id:Date.now().toString(),title:r.title||"Untitled",titleEn:r.title||"Untitled",instructor:r.instructor||"Unknown",instructorEn:r.instructor||"Unknown",progress:0,category:r.category||"General",categoryEn:r.category||"General",duration:r.duration||"0h",durationEn:r.duration||"0h",thumbnail:r.thumbnail||"",description:"New Course Description",descriptionEn:"New Course Description",lessonsCount:0,studentsCount:0,videoUrl:r.videoUrl};await L.addCourse(i)}w(),b(!1),C(null),o({title:"",instructor:"",duration:"",category:"Quran",status:"published",thumbnail:"https://images.unsplash.com/photo-1542816417-0983c9c9ad53?w=400&h=225&fit=crop",videoUrl:""})}catch(i){console.error("Failed to save course:",i),alert(`حدث خطأ أثناء حفظ الدورة: ${i.message}`)}},m=()=>{C(null),o({title:"",instructor:"",duration:"",category:"Quran",status:"published",thumbnail:"https://images.unsplash.com/photo-1542816417-0983c9c9ad53?w=400&h=225&fit=crop",videoUrl:""}),b(!0)},R=[{label:l("admin.totalCourses"),value:f.length.toString(),icon:D,color:"from-violet-500 to-purple-600"},{label:l("admin.publishedEpisodes"),value:f.reduce((t,i)=>t+(i.lessonsCount||0),0).toString(),icon:A,color:"from-emerald-500 to-teal-600"},{label:l("admin.totalHours"),value:"230",icon:_,color:"from-blue-500 to-cyan-600"},{label:l("admin.totalListeners"),value:f.reduce((t,i)=>t+(i.studentsCount||0),0).toString(),icon:P,color:"from-amber-500 to-orange-600"}];return e.jsxs("div",{className:"animate-fade-in space-y-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:l("admin.audioCourses")}),e.jsx("p",{className:"text-gray-300",children:l("courses.subtitle")})]}),e.jsxs("button",{onClick:m,className:"px-6 py-3 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-xl font-bold hover:opacity-90 transition-opacity shadow-lg flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{children:l("admin.addCourse")})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:R.map((t,i)=>e.jsx("div",{className:"glass-panel p-5 rounded-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${t.color} flex items-center justify-center`,children:e.jsx(t.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:t.label}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.value})]})]})},i))}),e.jsxs("div",{className:"glass-panel p-4 rounded-2xl flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(G,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:E,placeholder:l("admin.searchPlaceholder"),className:"w-full bg-white/5 border border-white/10 rounded-xl py-3 pr-12 pl-4 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]}),e.jsxs("select",{className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-violet-500",children:[e.jsx("option",{value:"",children:l("admin.allStatuses")}),e.jsx("option",{value:"published",children:l("admin.published")}),e.jsx("option",{value:"draft",children:l("admin.draft")})]}),e.jsxs("button",{className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-white flex items-center gap-2 hover:bg-white/10 transition-colors",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:l("admin.filter")})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:N.length>0?N.map(t=>e.jsx("div",{className:"glass-panel p-0 rounded-2xl overflow-hidden hover:border-violet-500/50 transition-all group",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-32 h-32 flex-shrink-0 relative",children:[e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-500 flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-white"})})})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:t.title}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-emerald-500/20 text-emerald-400",children:l("admin.published")})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:t.instructor})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),t.lessonsCount]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4"}),t.duration]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-4 h-4"}),t.studentsCount]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>u==null?void 0:u(t),className:"p-2 rounded-lg bg-white/5 hover:bg-emerald-500/20 text-gray-300 hover:text-emerald-400 transition-colors",title:"معاينة الدورة",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(t),className:"p-2 rounded-lg bg-white/5 hover:bg-blue-500/20 text-gray-300 hover:text-blue-400 transition-colors",children:e.jsx(re,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(t.id),className:"p-2 rounded-lg bg-white/5 hover:bg-red-500/20 text-gray-300 hover:text-red-400 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]})]})]})]})},t.id)):e.jsx("div",{className:"col-span-2 text-center py-10 text-gray-400",children:"No courses found matching your search."})}),e.jsx("div",{onClick:m,className:"glass-panel p-8 rounded-2xl border-2 border-dashed border-white/20 hover:border-violet-500/50 transition-colors cursor-pointer group",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-violet-500/20 flex items-center justify-center mb-4 group-hover:bg-violet-500/30 transition-colors",children:e.jsx(I,{className:"w-8 h-8 text-violet-400"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:l("admin.addCourse")}),e.jsx("p",{className:"text-gray-400",children:l("admin.clickToAdd")})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-2xl w-full max-w-2xl overflow-hidden glass-panel",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/10",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:d?"تحرير الدورة":l("admin.addCourse")}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:l("admin.title")}),e.jsx("input",{required:!0,value:r.title,onChange:t=>o({...r,title:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",placeholder:"مثال: فقه الطهارة"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:l("admin.instructor")}),e.jsx("input",{required:!0,value:r.instructor,onChange:t=>o({...r,instructor:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",placeholder:"مثال: الشيخ أحمد"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:l("admin.duration")}),e.jsx("input",{value:r.duration,onChange:t=>o({...r,duration:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",placeholder:"مثال: 5h 30m"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:l("admin.category")}),e.jsxs("select",{value:r.category,onChange:t=>o({...r,category:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",children:[e.jsx("option",{value:"Fiqh",children:"الفقه"}),e.jsx("option",{value:"Quran",children:"القرآن"}),e.jsx("option",{value:"History",children:"التاريخ"}),e.jsx("option",{value:"Ethics",children:"الأخلاق"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:l("admin.thumbnail")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:r.thumbnail,onChange:t=>o({...r,thumbnail:t.target.value}),className:"flex-1 bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none text-sm font-mono",placeholder:"https://..."}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-black/40 border border-white/10 flex items-center justify-center overflow-hidden",children:r.thumbnail?e.jsx("img",{src:r.thumbnail,className:"w-full h-full object-cover"}):e.jsx(le,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"space-y-4 border-t border-white/5 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"text-sm font-bold text-violet-400",children:["محاضرات الدورة (",((U=r.episodes)==null?void 0:U.length)||0,")"]}),e.jsxs("button",{type:"button",onClick:()=>j(!0),className:"text-xs px-3 py-1.5 bg-violet-600/20 text-violet-400 border border-violet-500/30 rounded-lg hover:bg-violet-600/30 transition-all flex items-center gap-2",children:[e.jsx(I,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"إضافة من R2"})]})]}),e.jsxs("div",{className:"space-y-2 max-h-[200px] overflow-y-auto custom-scrollbar pr-1",children:[(F=r.episodes)==null?void 0:F.map((t,i)=>e.jsxs("div",{className:"flex gap-2 items-center bg-white/5 p-2 rounded-lg border border-white/5 group",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-black/40 flex items-center justify-center text-[10px] text-gray-500 font-mono",children:i+1}),e.jsx("input",{className:"flex-1 bg-transparent border-none text-xs text-white focus:outline-none",value:t.title,onChange:h=>{const s=[...r.episodes||[]];s[i].title=h.target.value,o({...r,episodes:s})},placeholder:"عنوان المحاضرة"}),e.jsx("button",{type:"button",onClick:()=>{const h=(r.episodes||[]).filter((s,a)=>a!==i);o({...r,episodes:h})},className:"p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(M,{className:"w-3.5 h-3.5"})})]},i)),(!r.episodes||r.episodes.length===0)&&e.jsx("div",{className:"text-center py-6 border border-dashed border-white/10 rounded-xl text-gray-500 text-xs",children:"لم يتم إضافة أي محاضرات بعد."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-white/5 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:"درجة النجاح (%)"}),e.jsx("input",{type:"number",value:r.passingScore,onChange:t=>o({...r,passingScore:parseInt(t.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",min:"0",max:"100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:"الحالة"}),e.jsxs("select",{value:r.status,onChange:t=>o({...r,status:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",children:[e.jsx("option",{value:"published",children:"منشور"}),e.jsx("option",{value:"draft",children:"مسودة"})]})]})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-6 py-3 rounded-xl border border-white/10 text-white hover:bg-white/5 transition-colors",children:l("admin.cancel")}),e.jsxs("button",{type:"submit",className:"px-6 py-3 rounded-xl bg-violet-600 hover:bg-violet-500 text-white font-bold shadow-lg shadow-violet-600/20 transition-colors flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:l("admin.save")})]})]})]})]})}),S&&e.jsx(W,{children:e.jsx(xe,{isOpen:S,onClose:()=>j(!1),multiSelect:!0,onSelect:t=>{var h,s;const i={id:Date.now().toString(),courseId:r.id||"",title:((h=t.split("/").pop())==null?void 0:h.replace(/%20/g," "))||"محاضرة جديدة",videoUrl:t,orderIndex:((s=r.episodes)==null?void 0:s.length)||0};o(a=>({...a,episodes:[...a.episodes||[],i],videoUrl:t})),j(!1)},onSelectMultiple:t=>{const i=t.map((s,a)=>{var c,g;return{id:(Date.now()+a).toString(),courseId:r.id||"",title:((c=s.split("/").pop())==null?void 0:c.replace(/%20/g," "))||`محاضرة ${a+1}`,videoUrl:s,orderIndex:(((g=r.episodes)==null?void 0:g.length)||0)+a}}),h=[...r.episodes||[],...i].sort((s,a)=>s.title.localeCompare(a.title,void 0,{numeric:!0,sensitivity:"base"}));h.forEach((s,a)=>s.orderIndex=a),o(s=>({...s,episodes:h,videoUrl:t[0]})),j(!1)}})})]})};export{Ee as default};
