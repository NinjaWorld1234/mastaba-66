import{r as a,u as z,a as F,d as M,e as B,U as K,B as U,j as e,f as A}from"./index-C1vUyfCQ.js";import{s as j,a as R}from"./sanitize-CRr1UQdy.js";import{L as G}from"./lock-Bd2pICqi.js";import{G as H}from"./globe-BUiim1vq.js";import{S as q}from"./save-C46eDZB8.js";const v=a.memo(({item:s,isActive:i,onClick:r})=>{const l=a.useCallback(n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),r())},[r]);return e.jsxs("button",{onClick:r,onKeyDown:l,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${i?"bg-emerald-500/10 text-emerald-400 font-medium border-r-2 border-emerald-500":"text-gray-400 hover:bg-white/5 hover:text-white"}`,role:"tab","aria-selected":i,tabIndex:0,children:[e.jsx(s.icon,{className:"w-5 h-5","aria-hidden":"true"}),s.label]})});v.displayName="SettingsNavItem";const N=a.memo(({icon:s,iconBgColor:i,iconColor:r,title:l,subtitle:n,onClick:c,rightElement:m})=>{const g=a.useCallback(d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),c())},[c]);return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition-colors cursor-pointer",onClick:c,onKeyDown:g,role:"button",tabIndex:0,"aria-label":`${l}: ${n}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${i} flex items-center justify-center ${r}`,children:e.jsx(s,{className:"w-5 h-5","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-white text-sm",children:l}),e.jsx("p",{className:"text-xs text-gray-400",children:n})]})]}),m]})});N.displayName="PreferenceRow";const w=a.memo(({isOn:s,isRtl:i})=>e.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${s?"bg-emerald-600":"bg-gray-600"}`,role:"switch","aria-checked":s,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${s?i?"left-1":"right-1":i?"right-1":"left-1"}`,"aria-hidden":"true"})}));w.displayName="ToggleSwitch";const J=a.memo(()=>{const{t:s,language:i,setLanguage:r}=z(),{user:l,updateUser:n}=F(),{theme:c,toggleTheme:m}=M(),g=B(),d=a.useMemo(()=>c==="night",[c]),y=a.useMemo(()=>i==="ar",[i]),[h,u]=a.useState(""),[x,b]=a.useState(""),[f,p]=a.useState(""),[k,C]=a.useState("profile");a.useEffect(()=>{var t,o;l&&(u(((t=l.name)==null?void 0:t.split(" ")[0])||""),b(((o=l.name)==null?void 0:o.split(" ")[1])||""),p(l.email||""))},[l]);const S=a.useMemo(()=>[{id:"profile",label:s("settings.profile"),icon:K},{id:"notifications",label:s("settings.notifications"),icon:U},{id:"privacy",label:s("settings.privacy"),icon:G}],[s]),E=a.useCallback(()=>{const t=j(h),o=j(x),L=R(f),P=`${t} ${o}`.trim();n({name:P,email:L}),g.success("تم حفظ الإعدادات بنجاح! ✅")},[h,x,f,n,g]),T=a.useCallback(()=>{r(i==="ar"?"en":"ar")},[i,r]),$=a.useCallback(()=>{m()},[m]),D=a.useCallback(()=>{var t,o;l&&(u(((t=l.name)==null?void 0:t.split(" ")[0])||""),b(((o=l.name)==null?void 0:o.split(" ")[1])||""),p(l.email||""))},[l]),I=a.useCallback(t=>{C(t)},[]);return e.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto pb-10",role:"main","aria-label":s("settings.title"),children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:s("settings.title")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("nav",{className:"glass-panel p-4 rounded-2xl h-fit",role:"tablist","aria-label":"Settings sections",children:e.jsx("div",{className:"space-y-1",children:S.map(t=>e.jsx(v,{item:t,isActive:k===t.id,onClick:()=>I(t.id)},t.id))})}),e.jsxs("div",{className:"md:col-span-2 space-y-6",role:"tabpanel",children:[e.jsxs("section",{className:"glass-panel p-8 rounded-3xl","aria-label":s("settings.personalInfo"),children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 border-b border-white/10 pb-4",children:s("settings.personalInfo")}),e.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[e.jsxs("div",{className:"w-20 h-20 rounded-full bg-gray-700 relative overflow-hidden",children:[e.jsx("img",{src:(l==null?void 0:l.avatar)||"https://ui-avatars.com/api/?name=User&background=064e3b&color=fff&size=100",alt:"Profile",className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer",role:"button",tabIndex:0,"aria-label":s("settings.changePhoto"),children:e.jsx("span",{className:"text-[10px] text-white",children:s("settings.changePhoto")})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-white",children:[h," ",x]}),e.jsx("p",{className:"text-sm text-gray-400",children:s("settings.studentAdvanced")})]})]}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",onSubmit:t=>t.preventDefault(),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"firstName",className:"text-sm text-gray-400",children:s("settings.firstName")}),e.jsx("input",{id:"firstName",type:"text",value:h,onChange:t=>u(t.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20","aria-label":s("settings.firstName")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"lastName",className:"text-sm text-gray-400",children:s("settings.lastName")}),e.jsx("input",{id:"lastName",type:"text",value:x,onChange:t=>b(t.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20","aria-label":s("settings.lastName")})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm text-gray-400",children:s("settings.email")}),e.jsx("input",{id:"email",type:"email",value:f,onChange:t=>p(t.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20","aria-label":s("settings.email")})]})]})]}),e.jsxs("section",{className:"glass-panel p-8 rounded-3xl","aria-label":s("settings.appPreferences"),children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 border-b border-white/10 pb-4",children:s("settings.appPreferences")}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{icon:H,iconBgColor:"bg-blue-500/10",iconColor:"text-blue-400",title:s("settings.language"),subtitle:i==="ar"?"العربية":"English",onClick:T,rightElement:e.jsx("span",{className:"text-sm text-emerald-400",children:s("settings.changePhoto")})}),e.jsx(N,{icon:A,iconBgColor:"bg-purple-500/10",iconColor:"text-purple-400",title:s("settings.theme"),subtitle:d?"الوضع الليلي":"الوضع النهاري",onClick:$,rightElement:e.jsx(w,{isOn:d,isRtl:y})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:D,className:"px-6 py-3 rounded-xl border border-white/10 text-gray-300 hover:text-white hover:bg-white/5 transition-colors focus:outline-none focus:ring-2 focus:ring-white/20","aria-label":s("settings.cancel"),children:s("settings.cancel")}),e.jsxs("button",{onClick:E,className:"px-8 py-3 rounded-xl bg-gold-500 hover:bg-gold-600 text-black font-bold shadow-lg shadow-gold-500/20 flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-gold-400 focus:ring-offset-2 focus:ring-offset-gray-900","aria-label":s("settings.saveChanges"),children:[e.jsx(q,{className:"w-4 h-4","aria-hidden":"true"}),s("settings.saveChanges")]})]})]})]})]})});J.displayName="Settings";export{J as default};
