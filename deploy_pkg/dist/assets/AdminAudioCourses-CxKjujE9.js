import{c as O,u as _,r as n,j as e,X as U,S as z,m as q,a as E,i as B,g as P,E as G}from"./index-CEBuFF1J.js";import{V as H,M as Q,I as V}from"./video-Ck_nFw-B.js";import{L as J}from"./loader-circle-D1gfCbpd.js";import{H as W}from"./hard-drive-rjS-50vd.js";import{C as D}from"./clock-BCeuwlFT.js";import{C as K}from"./circle-check-GCzDdmw5.js";import{P as R}from"./play-tDSqt2t_.js";import{P as M}from"./plus-utrwS14e.js";import{F as X}from"./funnel-get3pUU9.js";import{E as Y}from"./eye-BPUGLi72.js";import{S as Z}from"./square-pen-DMhgpu_-.js";import{T as ee}from"./trash-2-BogrwR3r.js";import{S as te}from"./save-DolBYT3x.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],ae=O("file-play",se),re=({isOpen:p,onClose:r,onSelect:f,onSelectMultiple:C,multiSelect:v=!1})=>{const{t:T}=_(),[k,b]=n.useState([]),[j,g]=n.useState(!1),[w,N]=n.useState(null),[s,i]=n.useState(""),[x,F]=n.useState(new Set),y=async()=>{g(!0),N(null);try{const a=localStorage.getItem("mastaba_currentUser")?JSON.parse(localStorage.getItem("mastaba_currentUser")).access_token:null,c=await fetch("/api/r2/files",{headers:{Authorization:`Bearer ${a}`}});if(!c.ok){const d=await c.text();let t="Failed to fetch files";try{const l=JSON.parse(d);t=l.error||l.details||t}catch{t=d||t}throw c.status===403?t="غير مصرح لك بالوصول (Forbidden). قد تكون الجلسة قد انتهت، يرجى إعادة تسجيل الدخول.":c.status===401&&(t="يرجى تسجيل الدخول أولاً (Unauthorized)."),new Error(t)}const m=await c.json();b(m.files||[])}catch(a){console.error("Error fetching R2 files:",a),N(a.message)}finally{g(!1)}};n.useEffect(()=>{p&&y()},[p]);const S=n.useMemo(()=>k.filter(a=>a.name.toLowerCase().includes(s.toLowerCase())),[k,s]),I=a=>{if(a===0)return"0 B";const c=1024,m=["B","KB","MB","GB","TB"],d=Math.floor(Math.log(a)/Math.log(c));return parseFloat((a/Math.pow(c,d)).toFixed(2))+" "+m[d]},L=a=>new Date(a).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"});return p?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in",onClick:a=>a.target===a.currentTarget&&r(),children:e.jsxs("div",{className:"bg-[#0f172a] border border-white/10 rounded-[2rem] w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl relative",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-violet-500/20 flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-violet-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"اختر ملفاً من Cloudflare R2"}),e.jsx("p",{className:"text-xs text-gray-400",children:"تصفح ملفات الفيديو المرفوعة في مستودع myf-videos"})]})]}),e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-all shadow-inner",children:e.jsx(U,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-4 bg-white/[0.01] border-b border-white/5 flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(z,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"ابحث عن ملف...",value:s,onChange:a=>i(a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl py-2.5 pr-11 pl-4 text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 transition-colors text-sm"})]}),e.jsx("button",{onClick:y,disabled:j,className:"p-2.5 rounded-xl bg-white/5 border border-white/10 text-gray-400 hover:text-white hover:bg-white/10 transition-all disabled:opacity-50",title:"تحديث القائمة",children:e.jsx(q,{className:`w-5 h-5 ${j?"animate-spin":""}`})}),v&&x.size>0&&e.jsx("button",{onClick:()=>{C==null||C(Array.from(x)),r()},className:"px-6 py-2.5 rounded-xl bg-violet-600 text-white font-bold hover:bg-violet-500 transition-all flex items-center gap-2",children:e.jsxs("span",{children:["تأكيد الاختيار (",x.size,")"]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar min-h-[400px]",children:j?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-4 py-20 text-gray-400",children:[e.jsx(J,{className:"w-10 h-10 animate-spin text-violet-500"}),e.jsx("p",{className:"animate-pulse",children:"جاري جلب الملفات من السيرفر..."})]}):w?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-4 py-20 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mb-2",children:e.jsx(U,{className:"w-8 h-8 text-red-500"})}),e.jsx("h4",{className:"text-lg font-bold text-white",children:"حدث خطأ أثناء جلب الملفات"}),e.jsx("p",{className:"text-gray-400 max-w-md",children:w}),e.jsx("button",{onClick:y,className:"mt-4 px-6 py-2 rounded-xl bg-violet-600 hover:bg-violet-500 text-white font-bold transition-all shadow-lg shadow-violet-600/20",children:"حاول مرة أخرى"})]}):S.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(z,{className:"w-12 h-12 text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"لم يتم العثور على ملفات تطابق بحثك"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(a=>e.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation(),v?F(m=>{const d=new Set(m);return d.has(a.url)?d.delete(a.url):d.add(a.url),new Set(d)}):f(a.url)},className:`group glass-panel p-4 rounded-2xl transition-all cursor-pointer flex gap-4 overflow-hidden relative border bg-white/[0.02] ${x.has(a.url)?"border-violet-500 bg-violet-500/5":"border-white/5 hover:border-violet-500/50"}`,children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-violet-500/10 flex items-center justify-center flex-shrink-0 group-hover:bg-violet-500/20 transition-colors",children:a.name.toLowerCase().endsWith(".mp3")||a.name.toLowerCase().endsWith(".wav")?e.jsx(Q,{className:"w-7 h-7 text-violet-400"}):e.jsx(ae,{className:"w-7 h-7 text-violet-400"})}),e.jsxs("div",{className:"flex-1 min-w-0 pr-1",children:[e.jsx("h4",{className:"font-bold text-white truncate text-sm mb-1",title:a.name,children:a.name}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3"}),I(a.size)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),L(a.lastModified)]})]})]}),e.jsx("div",{className:`absolute left-4 top-1/2 -translate-y-1/2 transition-opacity ${x.has(a.url)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx(K,{className:`w-6 h-6 ${x.has(a.url)?"text-violet-500":"text-emerald-500"}`})})]},a.id))})}),e.jsx("div",{className:"p-4 border-t border-white/5 text-center bg-black/40",children:e.jsx("p",{className:"text-[10px] text-gray-500",children:"ملاحظة: سيتم استبدال الرابط الحالي في نموذج الدورة بالرابط المباشر للملف المختار."})})]})}):null},fe=({onPreview:p})=>{var m,d;const{t:r}=_(),[f,C]=n.useState([]),[v,T]=n.useState(""),[k,b]=n.useState(!1),[j,g]=n.useState(!1),[w,N]=n.useState(null),[s,i]=n.useState({title:"",instructor:"",duration:"",category:"Quran",status:"published",thumbnail:"https://images.unsplash.com/photo-1542816417-0983c9c9ad53?w=400&h=225&fit=crop"});n.useEffect(()=>{x()},[]);const x=async()=>{const t=await E.getCourses();C(t)},F=t=>{T(t.target.value)},y=f.filter(t=>t.title.toLowerCase().includes(v.toLowerCase())||t.instructor.toLowerCase().includes(v.toLowerCase())),S=async t=>{if(window.confirm("هل أنت متأكد من حذف هذه الدورة؟"))try{await E.deleteCourse(t),x()}catch(l){console.error("Failed to delete course:",l),alert(`فشل الحذف: ${l.message}`)}},I=t=>{N(t.id),i({title:t.title,instructor:t.instructor,duration:t.duration,category:t.category,status:"published",thumbnail:t.thumbnail,videoUrl:t.videoUrl}),b(!0)},L=async t=>{t.preventDefault();try{if(w)await E.updateCourse(w,{title:s.title,instructor:s.instructor,duration:s.duration,category:s.category,thumbnail:s.thumbnail,videoUrl:s.videoUrl});else{const l={id:Date.now().toString(),title:s.title||"Untitled",titleEn:s.title||"Untitled",instructor:s.instructor||"Unknown",instructorEn:s.instructor||"Unknown",progress:0,category:s.category||"General",categoryEn:s.category||"General",duration:s.duration||"0h",durationEn:s.duration||"0h",thumbnail:s.thumbnail||"",description:"New Course Description",descriptionEn:"New Course Description",lessonsCount:0,studentsCount:0,videoUrl:s.videoUrl};await E.addCourse(l)}x(),b(!1),N(null),i({title:"",instructor:"",duration:"",category:"Quran",status:"published",thumbnail:"https://images.unsplash.com/photo-1542816417-0983c9c9ad53?w=400&h=225&fit=crop",videoUrl:""})}catch(l){console.error("Failed to save course:",l),alert(`حدث خطأ أثناء حفظ الدورة: ${l.message}`)}},a=()=>{N(null),i({title:"",instructor:"",duration:"",category:"Quran",status:"published",thumbnail:"https://images.unsplash.com/photo-1542816417-0983c9c9ad53?w=400&h=225&fit=crop",videoUrl:""}),b(!0)},c=[{label:r("admin.totalCourses"),value:f.length.toString(),icon:B,color:"from-violet-500 to-purple-600"},{label:r("admin.publishedEpisodes"),value:f.reduce((t,l)=>t+(l.lessonsCount||0),0).toString(),icon:R,color:"from-emerald-500 to-teal-600"},{label:r("admin.totalHours"),value:"230",icon:D,color:"from-blue-500 to-cyan-600"},{label:r("admin.totalListeners"),value:f.reduce((t,l)=>t+(l.studentsCount||0),0).toString(),icon:P,color:"from-amber-500 to-orange-600"}];return e.jsxs("div",{className:"animate-fade-in space-y-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:r("admin.audioCourses")}),e.jsx("p",{className:"text-gray-300",children:r("courses.subtitle")})]}),e.jsxs("button",{onClick:a,className:"px-6 py-3 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-xl font-bold hover:opacity-90 transition-opacity shadow-lg flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{children:r("admin.addCourse")})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map((t,l)=>e.jsx("div",{className:"glass-panel p-5 rounded-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${t.color} flex items-center justify-center`,children:e.jsx(t.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:t.label}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.value})]})]})},l))}),e.jsxs("div",{className:"glass-panel p-4 rounded-2xl flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:v,onChange:F,placeholder:r("admin.searchPlaceholder"),className:"w-full bg-white/5 border border-white/10 rounded-xl py-3 pr-12 pl-4 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]}),e.jsxs("select",{className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-violet-500",children:[e.jsx("option",{value:"",children:r("admin.allStatuses")}),e.jsx("option",{value:"published",children:r("admin.published")}),e.jsx("option",{value:"draft",children:r("admin.draft")})]}),e.jsxs("button",{className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-white flex items-center gap-2 hover:bg-white/10 transition-colors",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:r("admin.filter")})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.length>0?y.map(t=>e.jsx("div",{className:"glass-panel p-0 rounded-2xl overflow-hidden hover:border-violet-500/50 transition-all group",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-32 h-32 flex-shrink-0 relative",children:[e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-500 flex items-center justify-center",children:e.jsx(R,{className:"w-6 h-6 text-white"})})})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:t.title}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-emerald-500/20 text-emerald-400",children:r("admin.published")})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:t.instructor})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),t.lessonsCount]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),t.duration]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-4 h-4"}),t.studentsCount]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>p==null?void 0:p(t),className:"p-2 rounded-lg bg-white/5 hover:bg-emerald-500/20 text-gray-300 hover:text-emerald-400 transition-colors",title:"معاينة الدورة",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(t),className:"p-2 rounded-lg bg-white/5 hover:bg-blue-500/20 text-gray-300 hover:text-blue-400 transition-colors",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(t.id),className:"p-2 rounded-lg bg-white/5 hover:bg-red-500/20 text-gray-300 hover:text-red-400 transition-colors",children:e.jsx(ee,{className:"w-4 h-4"})})]})]})]})]})},t.id)):e.jsx("div",{className:"col-span-2 text-center py-10 text-gray-400",children:"No courses found matching your search."})}),e.jsx("div",{onClick:a,className:"glass-panel p-8 rounded-2xl border-2 border-dashed border-white/20 hover:border-violet-500/50 transition-colors cursor-pointer group",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-violet-500/20 flex items-center justify-center mb-4 group-hover:bg-violet-500/30 transition-colors",children:e.jsx(M,{className:"w-8 h-8 text-violet-400"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:r("admin.addCourse")}),e.jsx("p",{className:"text-gray-400",children:r("admin.clickToAdd")})]})}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-2xl w-full max-w-2xl overflow-hidden glass-panel",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/10",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:w?"تحرير الدورة":r("admin.addCourse")}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:e.jsx(U,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:r("admin.title")}),e.jsx("input",{required:!0,value:s.title,onChange:t=>i({...s,title:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",placeholder:"مثال: فقه الطهارة"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:r("admin.instructor")}),e.jsx("input",{required:!0,value:s.instructor,onChange:t=>i({...s,instructor:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",placeholder:"مثال: الشيخ أحمد"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:r("admin.duration")}),e.jsx("input",{value:s.duration,onChange:t=>i({...s,duration:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",placeholder:"مثال: 5h 30m"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:r("admin.category")}),e.jsxs("select",{value:s.category,onChange:t=>i({...s,category:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",children:[e.jsx("option",{value:"Fiqh",children:"الفقه"}),e.jsx("option",{value:"Quran",children:"القرآن"}),e.jsx("option",{value:"History",children:"التاريخ"}),e.jsx("option",{value:"Ethics",children:"الأخلاق"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:r("admin.thumbnail")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:s.thumbnail,onChange:t=>i({...s,thumbnail:t.target.value}),className:"flex-1 bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none text-sm font-mono",placeholder:"https://..."}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-black/40 border border-white/10 flex items-center justify-center overflow-hidden",children:s.thumbnail?e.jsx("img",{src:s.thumbnail,className:"w-full h-full object-cover"}):e.jsx(V,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"space-y-4 border-t border-white/5 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"text-sm font-bold text-violet-400",children:["محاضرات الدورة (",((m=s.episodes)==null?void 0:m.length)||0,")"]}),e.jsxs("button",{type:"button",onClick:()=>g(!0),className:"text-xs px-3 py-1.5 bg-violet-600/20 text-violet-400 border border-violet-500/30 rounded-lg hover:bg-violet-600/30 transition-all flex items-center gap-2",children:[e.jsx(M,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"إضافة من R2"})]})]}),e.jsxs("div",{className:"space-y-2 max-h-[200px] overflow-y-auto custom-scrollbar pr-1",children:[(d=s.episodes)==null?void 0:d.map((t,l)=>e.jsxs("div",{className:"flex gap-2 items-center bg-white/5 p-2 rounded-lg border border-white/5 group",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-black/40 flex items-center justify-center text-[10px] text-gray-500 font-mono",children:l+1}),e.jsx("input",{className:"flex-1 bg-transparent border-none text-xs text-white focus:outline-none",value:t.title,onChange:u=>{const o=[...s.episodes||[]];o[l].title=u.target.value,i({...s,episodes:o})},placeholder:"عنوان المحاضرة"}),e.jsx("button",{type:"button",onClick:()=>{const u=(s.episodes||[]).filter((o,h)=>h!==l);i({...s,episodes:u})},className:"p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(U,{className:"w-3.5 h-3.5"})})]},l)),(!s.episodes||s.episodes.length===0)&&e.jsx("div",{className:"text-center py-6 border border-dashed border-white/10 rounded-xl text-gray-500 text-xs",children:"لم يتم إضافة أي محاضرات بعد."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-white/5 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:"درجة النجاح (%)"}),e.jsx("input",{type:"number",value:s.passingScore,onChange:t=>i({...s,passingScore:parseInt(t.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",min:"0",max:"100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:"الحالة"}),e.jsxs("select",{value:s.status,onChange:t=>i({...s,status:t.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:border-violet-500 focus:outline-none",children:[e.jsx("option",{value:"published",children:"منشور"}),e.jsx("option",{value:"draft",children:"مسودة"})]})]})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-6 py-3 rounded-xl border border-white/10 text-white hover:bg-white/5 transition-colors",children:r("admin.cancel")}),e.jsxs("button",{type:"submit",className:"px-6 py-3 rounded-xl bg-violet-600 hover:bg-violet-500 text-white font-bold shadow-lg shadow-violet-600/20 transition-colors flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:r("admin.save")})]})]})]})]})}),j&&e.jsx(G,{children:e.jsx(re,{isOpen:j,onClose:()=>g(!1),multiSelect:!0,onSelect:t=>{var u,o;const l={id:Date.now().toString(),courseId:s.id||"",title:((u=t.split("/").pop())==null?void 0:u.replace(/%20/g," "))||"محاضرة جديدة",videoUrl:t,orderIndex:((o=s.episodes)==null?void 0:o.length)||0};i(h=>({...h,episodes:[...h.episodes||[],l],videoUrl:t})),g(!1)},onSelectMultiple:t=>{const l=t.map((o,h)=>{var $,A;return{id:(Date.now()+h).toString(),courseId:s.id||"",title:(($=o.split("/").pop())==null?void 0:$.replace(/%20/g," "))||`محاضرة ${h+1}`,videoUrl:o,orderIndex:(((A=s.episodes)==null?void 0:A.length)||0)+h}}),u=[...s.episodes||[],...l].sort((o,h)=>o.title.localeCompare(h.title,void 0,{numeric:!0,sensitivity:"base"}));u.forEach((o,h)=>o.orderIndex=h),i(o=>({...o,episodes:u,videoUrl:t[0]})),g(!1)}})})]})};export{fe as default};
