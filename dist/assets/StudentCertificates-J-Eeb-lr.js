const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-ocProwue.js","assets/index-PO4O9_Fr.js","assets/index-UeQAcQWQ.css"])))=>i.map(i=>d[i]);
import{a as M,b as L,r as n,c as f,j as e,k as c,L as O,C as z,P as B,X as G,I as V,D as q,_ as j}from"./index-PO4O9_Fr.js";import{L as v}from"./loader-qDZSFkpB.js";import{E as $}from"./eye-DOTsDHGN.js";import{F as U}from"./file-text-TCn9I7PS.js";const W=()=>{const{user:J}=M(),l=L(),[d,g]=n.useState([]),[N,_]=n.useState([]),[E,k]=n.useState(!0),[o,x]=n.useState(null),[a,m]=n.useState(null);n.useEffect(()=>{D()},[]);const D=async()=>{try{const[t,s]=await Promise.all([f.getCertificates(),f.getCourses()]);g(t),_(s)}catch(t){console.error(t),l.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{k(!1)}},I=async t=>{x(t);try{const s=await f.generateCertificate(t);g(i=>[s,...i]),m(s),l.success("ØªÙ… Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­")}catch(s){l.error(s.message||"ÙØ´Ù„ Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©")}finally{x(null)}},R=async()=>{x("MASTER");try{const t=await f.generateMasterCertificate();g(s=>[t,...s]),m(t),l.success("ØªÙ… Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ğŸ“")}catch(t){l.error(t.message||"ÙØ´Ù„ Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©")}finally{x(null)}},T=async()=>{const t=document.getElementById("certificate-template");if(t)try{l.success("Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ù…Ù„Ù PDF...");const s=(await j(async()=>{const{default:w}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:w}},[])).default,{jsPDF:i}=await j(async()=>{const{jsPDF:w}=await import("./jspdf.es.min-ocProwue.js").then(F=>F.j);return{jsPDF:w}},__vite__mapDeps([0,1,2])),r=await s(t,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),b=r.toDataURL("image/jpeg",1),C=new i({orientation:"landscape",unit:"px",format:[r.width,r.height]});C.addImage(b,"JPEG",0,0,r.width,r.height),C.save(`certificate - ${a==null?void 0:a.courseId}.pdf`),l.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­")}catch(s){console.error("PDF download error:",s),l.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù")}},A=async()=>{const t=document.getElementById("certificate-template");if(t)try{l.success("Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØµÙˆØ±Ø©...");const s=(await j(async()=>{const{default:b}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:b}},[])).default,i=await s(t,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),r=document.createElement("a");r.download=`certificate - ${a==null?void 0:a.courseId}.jpg`,r.href=i.toDataURL("image/jpeg",1),r.click(),l.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­")}catch(s){console.error("Image download error:",s),l.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©")}},u=Array.isArray(N)?N:[],y=u.filter(t=>{const s=d.some(r=>r.courseId===t.id);return t.progress===100&&!s}),p=u.filter(t=>t.progress===100).length,h=u.length,S=h>0&&p===h,P=d.some(t=>t.courseId==="MASTER_CERT");return E?e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(v,{className:"animate-spin text-gold-500"})}):e.jsxs("div",{className:"animate-fade-in flex flex-col items-center pt-10 relative z-10 pb-20 px-4",children:[e.jsx("style",{children:`
@media print {
    body * { visibility: hidden; }
    #certificate - template, #certificate - template * { visibility: visible; }
    #certificate - template {
        position: fixed; left: 0; top: 0; width: 100 %; height: 100 %;
        margin: 0; padding: 0; background: white!important;
        z - index: 9999;
        -webkit - print - color - adjust: exact; print - color - adjust: exact;
    }
                        .no - print { display: none!important; }
}
                    .cert - card - preview {
    background - image: url('/certificate-frame.png');
    background - size: cover;
    background - position: center;
}
`}),e.jsxs("div",{className:"text-center mb-12 no-print",children:[e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gold-300 via-gold-500 to-gold-300 bg-clip-text text-transparent mb-3",children:"Ø´Ù‡Ø§Ø¯Ø§ØªÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©"}),e.jsx("p",{className:"text-gray-300 max-w-lg mx-auto",children:"ÙØ®ÙˆØ±ÙˆÙ† Ø¨Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ Ø§Ù„Ø¹Ù„Ù…ÙŠØ©. Ù‡Ù†Ø§ ØªØ¬Ø¯ ÙƒØ§ÙØ© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„ØªÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡Ø§ Ø®Ù„Ø§Ù„ Ù…Ø³ÙŠØ±ØªÙƒ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©."})]}),!a&&e.jsxs("div",{className:"w-full max-w-6xl space-y-12 no-print",children:[!P&&e.jsxs("div",{className:"relative group overflow-hidden rounded-3xl border border-gold-500/30 bg-gradient-to-br from-gold-900/40 to-black/60 p-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gold-500/10 blur-[80px] -mr-32 -mt-32 rounded-full group-hover:bg-gold-500/20 transition-all"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row items-center justify-between gap-8",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gold-500/20 rounded-2xl flex items-center justify-center border border-gold-500/40 shadow-lg shadow-gold-500/10",children:e.jsx(c,{className:"w-10 h-10 text-gold-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ© Ø§Ù„ÙƒØ¨Ø±Ù‰"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Ù…ØªØ¨Ù‚ÙŠ Ù„Ùƒ Ø¥ØªÙ…Ø§Ù… ",e.jsx("span",{className:"text-gold-400 font-bold",children:h-p})," Ø¯ÙˆØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©"]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[S?e.jsxs("button",{onClick:R,disabled:o==="MASTER",className:"px-8 py-3 bg-gradient-to-r from-gold-600 to-amber-600 text-white rounded-xl font-bold hover:scale-105 transition-all shadow-xl shadow-gold-900/30 flex items-center gap-2",children:[o==="MASTER"?e.jsx(v,{className:"animate-spin"}):e.jsx(c,{className:"w-5 h-5"}),"Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©"]}):e.jsxs("div",{className:"px-6 py-2 bg-white/5 border border-white/10 rounded-xl text-gray-500 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"})]}),e.jsx("div",{className:"w-64 bg-black/40 h-2.5 rounded-full overflow-hidden border border-white/5 p-0.5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-gold-600 to-amber-400 rounded-full transition-all duration-1000",style:{width:`${p/h*100}%`}})})]})]})]}),y.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-emerald-400 flex items-center gap-3",children:[e.jsx(z,{className:"w-6 h-6"}),"Ø¯ÙˆØ±Ø§Øª ØªÙ†ØªØ¸Ø± Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(t=>e.jsxs("div",{className:"glass-panel group p-6 rounded-2xl border border-emerald-500/20 hover:border-emerald-500/50 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 rounded-xl flex items-center justify-center text-emerald-400",children:e.jsx(c,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-3 py-1 rounded-full font-bold",children:"Ù…ÙƒØªÙ…Ù„Ø© 100%"})]}),e.jsx("h4",{className:"text-white font-bold text-lg mb-6 line-clamp-1",children:t.title}),e.jsxs("button",{onClick:()=>I(t.id),disabled:o===t.id,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 flex items-center justify-center gap-2",children:[o===t.id?e.jsx(v,{className:"animate-spin w-5 h-5"}):e.jsx(B,{className:"w-5 h-5"}),"Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¢Ù†"]})]},t.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white",children:["Ø³Ø¬Ù„ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª (",d.length,")"]}),e.jsx("div",{className:"h-px flex-1 mx-8 bg-gradient-to-r from-gold-500/50 to-transparent"})]}),d.length===0?e.jsxs("div",{className:"text-center py-20 bg-white/5 rounded-3xl border border-dashed border-white/10",children:[e.jsx(c,{className:"w-16 h-16 text-gray-600 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥ØµØ¯Ø§Ø± Ø£ÙŠ Ø´Ù‡Ø§Ø¯Ø§Øª Ø¨Ø¹Ø¯"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(t=>e.jsxs("div",{onClick:()=>m(t),className:"group relative cursor-pointer",children:[e.jsx("div",{className:"aspect-[1.4/1] w-full rounded-xl overflow-hidden shadow-2xl transition-transform duration-500 group-hover:-translate-y-2 group-hover:shadow-gold-500/10",children:e.jsxs("div",{className:"cert-card-preview w-full h-full p-4 flex flex-col items-center justify-center text-center relative border border-white/10",children:[e.jsx("div",{className:"absolute inset-0 bg-white/40 group-hover:bg-transparent transition-colors duration-500"}),e.jsx(c,{className:"w-12 h-12 text-emerald-900 mb-2 relative z-10"}),e.jsx("h5",{className:"text-emerald-950 font-bold text-xs mb-1 relative z-10 line-clamp-2 px-6",children:t.courseId==="MASTER_CERT"?"Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©":t.courseTitle}),e.jsx("p",{className:"text-[10px] text-gold-700 font-bold relative z-10",children:t.userName}),e.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx($,{className:"w-10 h-10 text-white"}),e.jsx("span",{className:"text-white text-sm font-bold",children:"Ø¹Ø±Ø¶ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©"})]})})]})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("h4",{className:"text-white font-bold line-clamp-1",children:t.courseTitle}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.issueDate})]})]},t.id))})]})]}),a&&e.jsxs("div",{className:"animate-scale-in flex flex-col items-center w-full max-w-5xl",children:[e.jsxs("div",{className:"w-full flex justify-between items-center mb-6 no-print",children:[e.jsxs("button",{onClick:()=>m(null),className:"bg-white/5 border border-white/10 px-6 py-2.5 rounded-xl text-gray-300 hover:text-white flex items-center gap-2 transition-all hover:bg-white/10",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:T,className:"px-6 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold flex items-center gap-2 shadow-lg transition-all",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"PDF"})]}),e.jsxs("button",{onClick:A,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold flex items-center gap-2 shadow-lg transition-all",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{children:"ØµÙˆØ±Ø©"})]}),e.jsxs("button",{onClick:()=>window.print(),className:"px-6 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-bold flex items-center gap-2 shadow-lg transition-all",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø·Ø¨Ø§Ø¹Ø©"})]})]})]}),e.jsx("div",{className:"w-full bg-white shadow-2xl relative overflow-hidden",children:e.jsxs("div",{id:"certificate-template",className:"relative aspect-[1.414/1] w-full p-0 flex flex-col items-center",children:[e.jsx("img",{src:"/certificate-frame.png",className:"absolute inset-0 w-full h-full object-fill",alt:"Frame"}),e.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col items-center justify-center text-center py-[12%] px-[15%]",children:[e.jsx("div",{className:"w-[10%] aspect-square text-emerald-800 mb-[2%]",children:e.jsx(c,{className:"w-full h-full"})}),e.jsx("h2",{className:"text-[3.5vw] font-serif text-emerald-950 font-bold mb-[1%] tracking-wide leading-tight",children:a.courseId==="MASTER_CERT"?"Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©":"Ø´Ù‡Ø§Ø¯Ø© Ø¥ØªÙ…Ø§Ù…"}),e.jsx("h3",{className:"text-[1.8vw] text-gold-600 font-bold mb-[5%]",children:"Ø§Ù„Ù…ØµØ·Ø¨Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©"}),e.jsx("p",{className:"text-[1.2vw] text-gray-600 mb-[2%]",children:"ØªØ´Ù‡Ø¯ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø£Ù† Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("h1",{className:"text-[3vw] font-bold text-emerald-950 mb-[4%] border-b-[3px] border-gold-400 px-8 py-2",children:a.userName}),e.jsxs("div",{className:"text-[1.4vw] text-gray-700 mb-[6%] max-w-[85%] leading-relaxed",children:[a.courseId==="MASTER_CERT"?e.jsxs(e.Fragment,{children:["Ù‚Ø¯ Ø£ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ ",e.jsx("span",{className:"font-bold text-emerald-900",children:"ÙƒØ§ÙØ© Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ£Ø³ÙŠØ³ÙŠØ©"})," Ø§Ù„Ù…Ù‚Ø±Ø±Ø© ÙÙŠ Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ­Ø§Ø² Ø¹Ù„Ù‰ ØªÙ‚Ø¯ÙŠØ±"]}):e.jsxs(e.Fragment,{children:["Ù‚Ø¯ Ø£ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ Ø¯ÙˆØ±Ø© ",e.jsxs("span",{className:"font-bold text-emerald-900",children:['"',a.courseTitle,'"']})," ÙˆØ­Ù‚Ù‚ ÙƒØ§ÙØ© Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ø¬ØªÙŠØ§Ø² Ø¨ØªÙ‚Ø¯ÙŠØ±"]}),e.jsx("div",{className:"font-bold text-gold-600 text-[1.8vw] mt-[1%]",children:a.grade==="Distinction"||a.grade==="Ù…Ù…ØªØ§Ø²"?"Ù…Ù…ØªØ§Ø² Ù…Ø¹ Ù…Ø±ØªØ¨Ø© Ø§Ù„Ø´Ø±Ù":a.grade||"Ø§Ù…ØªÙŠØ§Ø²"})]}),e.jsxs("div",{className:"flex justify-between w-full mt-auto items-end",children:[e.jsxs("div",{className:"text-center w-[30%]",children:[e.jsx("div",{className:"text-[1.4vw] border-b-2 border-emerald-900/30 mb-1 font-serif text-emerald-950 italic",children:"Ahmed Ali"}),e.jsx("p",{className:"text-[0.9vw] text-gray-600 font-bold",children:"Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ø§Ù…"})]}),e.jsxs("div",{className:"w-[15%] aspect-square relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-[3px] border-gold-400 rounded-full bg-white shadow-xl opacity-90 scale-110"}),e.jsxs("div",{className:"relative w-[85%] aspect-square bg-emerald-950 rounded-full flex flex-col items-center justify-center text-white text-center border-2 border-gold-500 shadow-inner",children:[e.jsx("span",{className:"text-[0.6vw] opacity-70 mb-0.5",children:"Ø§Ù„Ù…ØµØ·Ø¨Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©"}),e.jsx("span",{className:"text-[1.2vw] font-bold",children:"Ù…Ø¹ØªÙ…Ø¯"}),e.jsx("span",{className:"text-[0.7vw] mt-1 font-mono",children:a.issueDate.split("-")[0]})]})]}),e.jsxs("div",{className:"text-center w-[30%]",children:[e.jsx("div",{className:"text-[1.4vw] border-b-2 border-emerald-900/30 mb-1 font-serif text-emerald-950 italic",children:"Science Bench Office"}),e.jsx("p",{className:"text-[0.9vw] text-gray-600 font-bold",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ©"})]})]}),e.jsxs("div",{className:"absolute bottom-[4%] text-[0.8vw] text-gray-400 font-mono tracking-widest opacity-60",children:["VERIFICATION CODE: ",a.code]})]})]})})]})]})};export{W as default};
