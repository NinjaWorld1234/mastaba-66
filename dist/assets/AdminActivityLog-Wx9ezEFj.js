import{c as g,r as a,j as e,D as n,n as r,h as i,U as p,x as u,b as f}from"./index-BhqMYgdh.js";import{F as j}from"./funnel-CWqwpnv_.js";import{S as b}from"./square-pen-D2SvAP3I.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],N=g("log-in",w),y=a.memo(()=>{const[l,c]=a.useState([]);a.useEffect(()=>{(async()=>{try{const t=await f.getLogs();c(t)}catch(t){console.error("Failed to fetch logs",t)}})()},[]);const d=()=>{const s=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),t=URL.createObjectURL(s),o=document.createElement("a");o.href=t,o.download=`activity-log-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)},m={login:N,logout:u,course:i,download:n,edit:b,quiz:r,register:p,complete:i,system:r},x={login:"from-emerald-500 to-teal-600",logout:"from-gray-500 to-gray-600",course:"from-blue-500 to-cyan-600",download:"from-violet-500 to-purple-600",edit:"from-amber-500 to-orange-600",quiz:"from-pink-500 to-rose-600",register:"from-emerald-500 to-teal-600",complete:"from-gold-500 to-amber-600",system:"from-slate-500 to-slate-600"},h=[{label:"النشاطات اليوم",value:l.filter(s=>s.date===new Date().toISOString().split("T")[0]).length.toString(),color:"from-emerald-500 to-teal-600"},{label:"تسجيلات الدخول",value:l.filter(s=>s.action.toLowerCase().includes("login")).length.toString(),color:"from-violet-500 to-purple-600"},{label:"إجراءات النظام",value:l.filter(s=>s.action.toLowerCase().includes("backup")||s.action.toLowerCase().includes("restore")).length.toString(),color:"from-amber-500 to-orange-600"},{label:"المستخدمين النشطين",value:new Set(l.map(s=>s.userId)).size.toString(),color:"from-blue-500 to-cyan-600"}];return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"سجل النشاط"}),e.jsx("p",{className:"text-gray-300",children:"تتبع نشاط المستخدمين على المنصة"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-gray-300 flex items-center gap-2 hover:bg-white/10",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"تصفية"})]}),e.jsxs("button",{onClick:d,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-gray-300 flex items-center gap-2 hover:bg-white/10",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{children:"تصدير"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:h.map((s,t)=>e.jsx("div",{className:"glass-panel p-5 rounded-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${s.color} flex items-center justify-center`,children:e.jsx(r,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.value}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.label})]})]})},t))}),e.jsxs("div",{className:"glass-panel rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"آخر النشاطات"}),e.jsxs("select",{className:"bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm",children:[e.jsx("option",{children:"آخر 24 ساعة"}),e.jsx("option",{children:"آخر أسبوع"}),e.jsx("option",{children:"آخر شهر"})]})]}),e.jsx("div",{className:"divide-y divide-white/5",children:l.length>0?[...l].reverse().map(s=>{let t="system";s.action.includes("login")?t="login":s.action.includes("quiz")?t="quiz":s.action.includes("course")&&(t="course");const o=m[t]||r;return e.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-white/5",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${x[t]||"from-gray-500 to-gray-600"} flex items-center justify-center flex-shrink-0`,children:e.jsx(o,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:s.userId}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("span",{className:"text-emerald-400",children:s.action})]}),s.details&&e.jsx("p",{className:"text-gray-400 text-sm",children:s.details})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:s.date}),e.jsx("p",{className:"text-gray-500 text-xs",children:new Date(parseInt(s.timestamp)).toLocaleTimeString("ar-SA")})]})]},s.id)}):e.jsx("div",{className:"p-8 text-center text-gray-400",children:"لا توجد نشاطات مسجلة بعد"})})]})]})});y.displayName="AdminActivityLog";export{y as default};
