import{r as l,u as V,a as W,h as X,b as Y,U as B,B as P,L as D,j as e,i as Z,k as _}from"./index-PO4O9_Fr.js";import{s as L,a as ee}from"./sanitize-CRr1UQdy.js";import{D as se,A as te}from"./AdminBackupSettings-d6KG90QK.js";import{S as ae}from"./save-D0iCKTwe.js";import{G as $}from"./globe-H-Auzyor.js";import{C as le}from"./clock-DV4-bnDj.js";import"./upload-T5jrmAXN.js";const I=l.memo(({item:s,isActive:i,onClick:n})=>{const t=l.useCallback(r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),n())},[n]);return e.jsxs("button",{onClick:n,onKeyDown:t,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${i?"bg-emerald-500/10 text-emerald-400 font-medium border-r-2 border-emerald-500":"text-gray-400 hover:bg-white/5 hover:text-white"}`,role:"tab","aria-selected":i,tabIndex:0,children:[e.jsx(s.icon,{className:"w-5 h-5","aria-hidden":"true"}),s.label]})});I.displayName="SettingsNavItem";const c=l.memo(({icon:s,iconBgColor:i,iconColor:n,title:t,subtitle:r,onClick:o,rightElement:b})=>{const u=l.useCallback(x=>{(x.key==="Enter"||x.key===" ")&&o&&(x.preventDefault(),o())},[o]);return e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition-colors ${o?"cursor-pointer":""}`,onClick:o,onKeyDown:u,role:o?"button":"presentation",tabIndex:o?0:-1,"aria-label":`${t}: ${r}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${i} flex items-center justify-center ${n}`,children:e.jsx(s,{className:"w-5 h-5","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-white text-sm",children:t}),e.jsx("p",{className:"text-xs text-gray-400",children:r})]})]}),b]})});c.displayName="PreferenceRow";const m=l.memo(({isOn:s,isRtl:i,onToggle:n})=>e.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors cursor-pointer ${s?"bg-emerald-600":"bg-gray-600"}`,role:"switch",onClick:n,"aria-checked":s,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${s?i?"left-1":"right-1":i?"right-1":"left-1"}`,"aria-hidden":"true"})}));m.displayName="ToggleSwitch";const ie=l.memo(()=>{const{t:s,language:i,setLanguage:n}=V(),{user:t,updateUser:r}=W(),{theme:o,toggleTheme:b}=X(),u=Y(),x=l.useMemo(()=>o==="night",[o]),g=l.useMemo(()=>i==="ar",[i]),[p,j]=l.useState(""),[f,N]=l.useState(""),[v,y]=l.useState(""),[h,z]=l.useState("profile"),[w,A]=l.useState(!0),[C,F]=l.useState(!0),[k,M]=l.useState(!0),[S,R]=l.useState(!0),[E,K]=l.useState(!0);l.useEffect(()=>{var a,d;t&&(j(((a=t.name)==null?void 0:a.split(" ")[0])||""),N(((d=t.name)==null?void 0:d.split(" ")[1])||""),y(t.email||""))},[t]);const O=l.useMemo(()=>{const a=[{id:"profile",label:s("settings.profile"),icon:B},{id:"notifications",label:s("settings.notifications"),icon:P},{id:"privacy",label:s("settings.privacy"),icon:D}];return(t==null?void 0:t.role)==="admin"&&a.push({id:"backup",label:"النسخ الاحتياطي",icon:se}),a},[s,t==null?void 0:t.role]),U=l.useCallback(()=>{const a=L(p),d=L(f),J=ee(v),Q=`${a} ${d}`.trim();r({name:Q,email:J}),u.success("تم حفظ الإعدادات بنجاح! ✅")},[p,f,v,r,u]),G=l.useCallback(()=>{n(i==="ar"?"en":"ar")},[i,n]),T=l.useCallback(()=>{b()},[b]),H=l.useCallback(()=>{var a,d;t&&(j(((a=t.name)==null?void 0:a.split(" ")[0])||""),N(((d=t.name)==null?void 0:d.split(" ")[1])||""),y(t.email||""))},[t]),q=l.useCallback(a=>{z(a)},[]);return e.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto pb-10",role:"main","aria-label":s("settings.title"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:s("settings.title")}),h!=="backup"&&e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:H,className:"px-6 py-2 rounded-xl text-gray-400 hover:text-white transition-colors",children:s("settings.cancel")}),e.jsxs("button",{onClick:U,className:"px-6 py-2 bg-gold-500 hover:bg-gold-600 text-black font-bold rounded-xl flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),s("settings.saveChanges")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("nav",{className:"glass-panel p-4 rounded-2xl h-fit sticky top-0",role:"tablist","aria-label":"Settings sections",children:e.jsx("div",{className:"space-y-1",children:O.map(a=>e.jsx(I,{item:a,isActive:h===a.id,onClick:()=>q(a.id)},a.id))})}),e.jsxs("div",{className:"md:col-span-2 space-y-6",role:"tabpanel",children:[h==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"glass-panel p-8 rounded-3xl","aria-label":s("settings.personalInfo"),children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 border-b border-white/10 pb-4",children:s("settings.personalInfo")}),e.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[e.jsxs("div",{className:"w-20 h-20 rounded-full bg-gray-700 relative overflow-hidden",children:[e.jsx("img",{src:(t==null?void 0:t.avatar)||"https://ui-avatars.com/api/?name=User&background=064e3b&color=fff&size=100",alt:"Profile",className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer",role:"button",tabIndex:0,"aria-label":s("settings.changePhoto"),children:e.jsx("span",{className:"text-[10px] text-white",children:s("settings.changePhoto")})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-white",children:[p," ",f]}),e.jsx("p",{className:"text-sm text-gray-400",children:s("settings.studentAdvanced")})]})]}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",onSubmit:a=>a.preventDefault(),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"firstName",className:"text-sm text-gray-400",children:s("settings.firstName")}),e.jsx("input",{id:"firstName",type:"text",value:p,onChange:a=>j(a.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20","aria-label":s("settings.firstName")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"lastName",className:"text-sm text-gray-400",children:s("settings.lastName")}),e.jsx("input",{id:"lastName",type:"text",value:f,onChange:a=>N(a.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20","aria-label":s("settings.lastName")})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm text-gray-400",children:s("settings.email")}),e.jsx("input",{id:"email",type:"email",value:v,onChange:a=>y(a.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20","aria-label":s("settings.email")})]})]})]}),e.jsxs("section",{className:"glass-panel p-8 rounded-3xl","aria-label":s("settings.appPreferences"),children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 border-b border-white/10 pb-4",children:s("settings.appPreferences")}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{icon:$,iconBgColor:"bg-blue-500/10",iconColor:"text-blue-400",title:s("settings.language"),subtitle:i==="ar"?"العربية":"English",onClick:G,rightElement:e.jsx("span",{className:"text-sm text-emerald-400",children:"تغيير"})}),e.jsx(c,{icon:Z,iconBgColor:"bg-purple-500/10",iconColor:"text-purple-400",title:s("settings.theme"),subtitle:x?"الوضع الليلي":"الوضع النهاري",onClick:T,rightElement:e.jsx(m,{isOn:x,isRtl:g,onToggle:T})})]})]})]}),h==="notifications"&&e.jsxs("section",{className:"glass-panel p-8 rounded-3xl animate-slide-up",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 border-b border-white/10 pb-4",children:"الإشعارات"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{icon:P,iconBgColor:"bg-emerald-500/10",iconColor:"text-emerald-400",title:"إشعارات المتصفح",subtitle:"تلقي تنبيهات بالدروس والرسائل الجديدة",rightElement:e.jsx(m,{isOn:w,isRtl:g,onToggle:()=>A(!w)})}),e.jsx(c,{icon:$,iconBgColor:"bg-blue-500/10",iconColor:"text-blue-400",title:"إشعارات البريد",subtitle:"تلقي ملخصات أسبوعية بالبريد الإلكتروني",rightElement:e.jsx(m,{isOn:C,isRtl:g,onToggle:()=>F(!C)})}),e.jsx(c,{icon:le,iconBgColor:"bg-amber-500/10",iconColor:"text-amber-400",title:"تذكير الدروس",subtitle:"تذكيري بالدروس غير المكتملة يومياً",rightElement:e.jsx(m,{isOn:k,isRtl:g,onToggle:()=>M(!k)})})]})]}),h==="privacy"&&e.jsxs("section",{className:"glass-panel p-8 rounded-3xl animate-slide-up",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 border-b border-white/10 pb-4",children:"الخصوصية والأمان"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{icon:D,iconBgColor:"bg-red-500/10",iconColor:"text-red-400",title:"تغيير كلمة المرور",subtitle:"تغيير كلمة المرور الخاصة بحسابك",onClick:()=>u.info("ستصلك رسالة لإعادة تعيين كلمة المرور"),rightElement:e.jsx("span",{className:"text-xs text-emerald-400",children:"تعديل"})}),e.jsx(c,{icon:B,iconBgColor:"bg-indigo-500/10",iconColor:"text-indigo-400",title:"ظهور النشاط",subtitle:"إظهار حالة التواجد للآخرين",rightElement:e.jsx(m,{isOn:S,isRtl:g,onToggle:()=>R(!S)})}),e.jsx(c,{icon:_,iconBgColor:"bg-gold-500/10",iconColor:"text-gold-400",title:"ملف النقاط العام",subtitle:"إظهار نقاطك في لوحة المتصدرين",rightElement:e.jsx(m,{isOn:E,isRtl:g,onToggle:()=>K(!E)})})]})]}),h==="backup"&&(t==null?void 0:t.role)==="admin"&&e.jsx("div",{className:"animate-slide-up",children:e.jsx(te,{})})]})]})]})});ie.displayName="Settings";export{ie as default};
