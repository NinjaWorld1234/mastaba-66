import{d as A,a as E,r as i,c as P,j as e,X as L,l as T,t as U,g as q,k as y}from"./index-PO4O9_Fr.js";import{M as _}from"./mail--37byxe_.js";import{M as $}from"./map-pin-B659mmqr.js";import{P as z}from"./phone-k7tXVEg0.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],F=A("user-check",B),J=({isOpen:a,onClose:k,studentId:t,onMessage:c})=>{var x,n,o,m,h,b,p,j,g,u,N,w,f,v;const{user:l}=E(),[s,D]=i.useState(null),[C,d]=i.useState(!1);i.useEffect(()=>{a&&t&&M()},[a,t]);const M=async()=>{if(t){d(!0);try{const r=await P.getUserDetails(t);D(r)}catch(r){console.error("Failed to load details",r)}finally{d(!1)}}};return!a||!t?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 overflow-y-auto",children:e.jsxs("div",{className:"glass-panel w-full max-w-4xl p-0 relative animate-fade-in rounded-3xl border border-white/10 overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-start bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[((x=s==null?void 0:s.user)==null?void 0:x.avatar)&&e.jsx("img",{src:s.user.avatar,alt:s.user.name,className:"w-16 h-16 rounded-2xl border-2 border-emerald-500/50"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:(n=s==null?void 0:s.user)==null?void 0:n.name}),e.jsx("p",{className:"text-gray-400",children:(o=s==null?void 0:s.user)==null?void 0:o.email}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${((m=s==null?void 0:s.user)==null?void 0:m.status)==="active"?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:((h=s==null?void 0:s.user)==null?void 0:h.status)==="active"?"نشط":"غير نشط"}),e.jsxs("span",{className:"bg-white/5 px-2 py-0.5 rounded-full text-xs text-gray-300",children:["المستوى ",(b=s==null?void 0:s.user)==null?void 0:b.level]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[(l==null?void 0:l.role)==="supervisor"&&c&&e.jsx("button",{onClick:()=>c(t),className:"p-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl transition-colors",title:"إرسال رسالة",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsx("button",{onClick:k,className:"p-3 bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white rounded-xl transition-colors",children:e.jsx(L,{className:"w-5 h-5"})})]})]}),C?e.jsx("div",{className:"p-12 text-center text-gray-400",children:"جاري التحميل..."}):e.jsxs("div",{className:"overflow-y-auto p-6 space-y-8 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"الموقع"})]}),e.jsx("p",{className:"text-white",children:((p=s==null?void 0:s.user)==null?void 0:p.country)||"غير محدد"})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"واتساب"})]}),e.jsx("p",{className:"text-white",dir:"ltr",children:((j=s==null?void 0:s.user)==null?void 0:j.whatsapp)||"-"})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"تاريخ الانضمام"})]}),e.jsx("p",{className:"text-white",children:(u=(g=s==null?void 0:s.user)==null?void 0:g.joinDate)==null?void 0:u.split("T")[0]})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx(F,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-xs",children:"المشرف المسؤول"})]}),e.jsx("p",{className:"text-white",children:((N=s==null?void 0:s.user)==null?void 0:N.supervisorName)||"لا يوجد"})]})]}),((w=s==null?void 0:s.user)==null?void 0:w.role)==="supervisor"&&e.jsxs("div",{children:[e.jsxs("h4",{className:"flex items-center gap-2 text-lg font-bold text-white mb-4",children:[e.jsx(U,{className:"w-5 h-5 text-purple-400"}),"بيانات المشرف"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5 border-l-4 border-l-purple-500",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"الطلاب الحاليين"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s.user.studentCount||0})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5 border-l-4 border-l-blue-500",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"السعة القصوى"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s.user.supervisorCapacity||0})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5 border-l-4 border-l-emerald-500",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"الأولوية"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s.user.supervisorPriority||0})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"flex items-center gap-2 text-lg font-bold text-white mb-4",children:[e.jsx(q,{className:"w-5 h-5 text-emerald-400"}),"الدورات المسجلة"]}),e.jsx("div",{className:"space-y-3",children:((f=s==null?void 0:s.enrollments)==null?void 0:f.length)>0?s.enrollments.map((r,S)=>e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:r.courseTitle}),e.jsxs("p",{className:"text-xs text-gray-400",children:["آخر دخول: ",new Date(r.lastAccess).toLocaleDateString("ar-EG")]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-32 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${r.progress}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-emerald-400",children:[r.progress,"%"]})]})]},S)):e.jsx("p",{className:"text-gray-500 text-center py-4 bg-white/5 rounded-xl border border-dashed border-white/10",children:"لا توجد دورات مسجلة"})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"flex items-center gap-2 text-lg font-bold text-white mb-4",children:[e.jsx(y,{className:"w-5 h-5 text-amber-400"}),"الشهادات"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:((v=s==null?void 0:s.certificates)==null?void 0:v.length)>0?s.certificates.map(r=>e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/10 to-orange-600/10 border border-amber-500/20 p-4 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-amber-500/20 flex items-center justify-center shrink-0",children:e.jsx(y,{className:"w-6 h-6 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100 font-bold line-clamp-1",children:r.courseTitle}),e.jsx("p",{className:"text-amber-500/60 text-xs",children:r.issueDate})]})]},r.id)):e.jsx("p",{className:"col-span-2 text-gray-500 text-center py-4 bg-white/5 rounded-xl border border-dashed border-white/10",children:"لا توجد شهادات مكتسبة"})})]})]})]})})};export{J as S,F as U};
