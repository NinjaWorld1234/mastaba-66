import{a as k,e as M,r,b as m,j as e,A as h,C as I,D}from"./index-DrVEpbcF.js";import{L as f}from"./loader-BNBKwQyi.js";import{L as _}from"./lock-zEEa1poD.js";const F=()=>{const{user:a}=k(),i=M(),[d,b]=r.useState([]),[g,N]=r.useState([]),[w,v]=r.useState(!0),[o,c]=r.useState(null),[s,n]=r.useState(null);r.useEffect(()=>{y()},[]);const y=async()=>{try{const[t,l]=await Promise.all([m.getCertificates(),m.getCourses()]);b(t),N(l)}catch(t){console.error(t),i.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{v(!1)}},C=async t=>{c(t);try{const l=await m.generateCertificate(t);b(j=>[l,...j]),n(l),i.success("ØªÙ… Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­")}catch(l){i.error(l.message||"ÙØ´Ù„ Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©")}finally{c(null)}},E=async()=>{c("MASTER");try{const t=await m.generateMasterCertificate();b(l=>[t,...l]),n(t),i.success("ØªÙ… Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ğŸ“")}catch(t){i.error(t.message||"ÙØ´Ù„ Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©")}finally{c(null)}},T=()=>{window.print()},u=g.filter(t=>{const l=d.some(A=>A.courseId===t.id);return t.progress===100&&!l}),p=g.filter(t=>t.progress===100).length,x=g.length,S=x>0&&p===x,R=d.some(t=>t.courseId==="MASTER_CERT");return w?e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(f,{className:"animate-spin"})}):e.jsxs("div",{className:"animate-fade-in flex flex-col items-center pt-10 relative z-10 pb-20 px-4",children:[e.jsx("style",{children:`
                    @media print {
                        body * { visibility: hidden; }
                        #certificate-template, #certificate-template * { visibility: visible; }
                        #certificate-template {
                            position: fixed; left: 0; top: 0; width: 100%; height: 100%;
                            margin: 0; padding: 20px; background: white !important;
                            z-index: 9999; border: 10px double #d97706 !important;
                            -webkit-print-color-adjust: exact; print-color-adjust: exact;
                        }
                        .no-print { display: none !important; }
                    }
                `}),e.jsxs("div",{className:"text-center mb-8 no-print",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Ø¥Ø¯Ø§Ø±Ø© ÙˆØ¹Ø±Ø¶ Ø´Ù‡Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©"}),e.jsx("button",{onClick:()=>{n({id:"sample",studentId:(a==null?void 0:a.id)||"sample-user",courseId:"sample-course",userName:(a==null?void 0:a.name)||"Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",courseTitle:"Ù†Ù…ÙˆØ°Ø¬ Ø´Ù‡Ø§Ø¯Ø© Ù…Ø¹ØªÙ…Ø¯Ø©",issueDate:new Date().toISOString().split("T")[0],grade:"Excellent",code:"SAMPLE-123456"})},className:"text-sm text-gold-400 hover:text-gold-300 underline underline-offset-4",children:"Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ù„Ù„Ø´Ù‡Ø§Ø¯Ø©"})]}),!s&&e.jsxs("div",{className:"w-full max-w-4xl space-y-8 no-print",children:[!R&&e.jsxs("div",{className:"glass-panel p-6 rounded-2xl relative overflow-hidden border border-gold-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gold-500/20 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"w-8 h-8 text-gold-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["ØªÙ…Ù†Ø­ Ø¹Ù†Ø¯ Ø¥ØªÙ…Ø§Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ±Ø§Øª (",p,"/",x,")"]})]})]}),S?e.jsxs("button",{onClick:E,disabled:o==="MASTER",className:"px-6 py-2 bg-gradient-to-r from-gold-600 to-amber-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-gold-900/20 transition-all flex items-center gap-2",children:[o==="MASTER"?e.jsx(f,{className:"animate-spin w-5 h-5"}):e.jsx(h,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 bg-black/20 px-4 py-2 rounded-lg border border-white/5",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"ØºÙŠØ± Ù…ØªØ§Ø­ Ø¨Ø¹Ø¯"})]})]}),e.jsx("div",{className:"mt-4 w-full bg-black/30 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gold-500 transition-all duration-1000",style:{width:`${p/x*100}%`}})})]}),u.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-emerald-400"}),"Ø¯ÙˆØ±Ø§Øª Ù…ÙƒØªÙ…Ù„Ø© (Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¥ØµØ¯Ø§Ø±)"]}),e.jsx("div",{className:"grid gap-4",children:u.map(t=>e.jsxs("div",{className:"glass-panel p-4 flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-medium",children:t.title}),e.jsx("button",{onClick:()=>C(t.id),disabled:o===t.id,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-sm font-bold transition-colors flex items-center gap-2",children:o===t.id?e.jsx(f,{className:"animate-spin w-4 h-4"}):"Ø¥ØµØ¯Ø§Ø±"})]},t.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white font-bold text-lg",children:["Ø´Ù‡Ø§Ø¯Ø§ØªÙŠ (",d.length,")"]}),d.length===0?e.jsx("div",{className:"text-center py-10 text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ù‡Ø§Ø¯Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(t=>e.jsx("div",{onClick:()=>n(t),className:`glass-panel p-5 cursor-pointer hover:border-emerald-500/50 transition-all group ${t.courseId==="MASTER_CERT"?"border-gold-500/30 bg-gold-900/10":""}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.courseId==="MASTER_CERT"?"bg-gold-500/20":"bg-emerald-500/20"}`,children:e.jsx(h,{className:`w-6 h-6 ${t.courseId==="MASTER_CERT"?"text-gold-400":"text-emerald-400"}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-bold ${t.courseId==="MASTER_CERT"?"text-gold-200":"text-white"}`,children:t.courseTitle}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ",t.issueDate]})]})]})},t.id))})]})]}),s&&e.jsxs("div",{className:"animate-scale-in flex flex-col items-center w-full max-w-3xl",children:[e.jsx("button",{onClick:()=>n(null),className:"mb-4 text-gray-400 hover:text-white flex items-center gap-2 no-print self-start",children:"â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø´Ù‡Ø§Ø¯Ø§Øª"}),e.jsxs("div",{className:"glass-panel p-1 border-4 border-double border-gold-600/30 rounded-lg w-full bg-[#fffcf2] mb-8 relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center z-10 rounded-lg no-print",children:e.jsxs("button",{onClick:T,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold flex items-center gap-2 transform translate-y-4 group-hover:translate-y-0 transition-all",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"ØªØ­Ù…ÙŠÙ„ PDF"})]})}),e.jsxs("div",{id:"certificate-template",className:`border border-gray-300 p-10 flex flex-col items-center text-center relative overflow-hidden bg-white min-h-[600px] justify-center ${s.courseId==="MASTER_CERT"?"bg-amber-50/50":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 border-t-8 border-l-8 border-emerald-900 opacity-80"}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 border-t-8 border-r-8 border-emerald-900 opacity-80"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 border-b-8 border-l-8 border-emerald-900 opacity-80"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 border-b-8 border-r-8 border-emerald-900 opacity-80"}),e.jsx("div",{className:"w-20 h-20 mb-6 text-emerald-800",children:e.jsx(h,{className:"w-full h-full"})}),e.jsx("h2",{className:"text-5xl font-serif text-emerald-950 font-bold mb-4 tracking-wide",children:s.courseId==="MASTER_CERT"?"Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©":"Ø´Ù‡Ø§Ø¯Ø© Ø¥ØªÙ…Ø§Ù…"}),e.jsx("h3",{className:"text-xl text-gold-600 font-medium mb-12",children:"Ø§Ù„Ù…ØµØ·Ø¨Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©"}),e.jsx("p",{className:"text-gray-600 mb-4 text-lg",children:"ØªØ´Ù‡Ø¯ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø£Ù†"}),e.jsx("h1",{className:"text-4xl font-bold text-emerald-950 mb-6 underline decoration-gold-400 decoration-2 underline-offset-8 px-8 py-2",children:s.userName}),e.jsxs("p",{className:"text-gray-700 mb-12 max-w-lg leading-loose text-lg",children:[s.courseId==="MASTER_CERT"?e.jsxs(e.Fragment,{children:["Ù‚Ø¯ Ø£ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ ",e.jsx("span",{className:"font-bold text-emerald-900",children:"ÙƒØ§ÙØ© Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ£Ø³ÙŠØ³ÙŠØ©"})," Ø§Ù„Ù…Ù‚Ø±Ø±Ø© ÙÙŠ Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ­Ø§Ø² Ø¹Ù„Ù‰ ØªÙ‚Ø¯ÙŠØ±"]}):e.jsxs(e.Fragment,{children:["Ù‚Ø¯ Ø£ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ Ø¯ÙˆØ±Ø© ",e.jsxs("span",{className:"font-bold text-emerald-900",children:['"',s.courseTitle,'"']})," ÙˆØ­Ù‚Ù‚ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ø¬ØªÙŠØ§Ø² Ø¨ØªÙ‚Ø¯ÙŠØ±"]}),e.jsx("br",{}),e.jsx("span",{className:"font-bold text-gold-600 text-xl mt-2 inline-block",children:s.grade==="Distinction"?"Ø§Ù…ØªÙŠØ§Ø² Ù…Ø¹ Ù…Ø±ØªØ¨Ø© Ø§Ù„Ø´Ø±Ù":"Ù…Ù…ØªØ§Ø²"})]}),e.jsxs("div",{className:"flex justify-between w-full mt-auto px-16 items-end pb-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-10 w-40 border-b-2 border-emerald-900/30 mb-2 font-handwriting text-emerald-900 text-2xl",dir:"ltr",children:"Ahmed Ali"}),e.jsx("p",{className:"text-sm text-gray-500 font-bold",children:"Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ø§Ù…"})]}),e.jsx("div",{className:"w-32 h-32 relative mx-8",children:e.jsx("div",{className:"absolute inset-0 border-4 border-gold-500 rounded-full flex items-center justify-center opacity-80 rotate-12 bg-white shadow-xl",children:e.jsxs("div",{className:"w-28 h-28 bg-emerald-900 rounded-full flex flex-col items-center justify-center text-white text-center leading-tight shadow-inner border-2 border-white/20",children:[e.jsx("span",{className:"text-[10px] opacity-70 mb-1",children:"Ø§Ù„Ù…ØµØ·Ø¨Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©"}),e.jsx("span",{className:"text-lg font-bold",children:"Ù…Ø¹ØªÙ…Ø¯"}),e.jsx("span",{className:"text-xs mt-1 font-mono",children:s.issueDate.split("-")[0]})]})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-10 w-40 border-b-2 border-emerald-900/30 mb-2 font-handwriting text-emerald-900 text-xl font-bold",children:"System Admin"}),e.jsx("p",{className:"text-sm text-gray-500 font-bold",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ©"})]})]}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-[10px] text-gray-400 font-mono tracking-widest",children:["ID: ",s.code]})]})]})]})]})};export{F as default};
