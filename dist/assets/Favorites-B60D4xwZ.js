import{d as m,a as F,r as d,c,j as e,o as _,g as w,p as k,S as H,H as L}from"./index-PO4O9_Fr.js";import{F as S}from"./file-text-TCn9I7PS.js";import{P as M}from"./play-CRP0G9QH.js";import{T as A}from"./trash-2-B1SjAVum.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],z=m("folder-open",E);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],V=m("grid-3x3",T);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],D=m("list",B),J=()=>{const{user:n}=F(),[x,p]=d.useState("grid"),[l,I]=d.useState("all"),[$,f]=d.useState(!0),[o,j]=d.useState([]),[O,P]=d.useState([]);d.useEffect(()=>{(async()=>{if(n){f(!0);try{const s=await c.users.getFavorites(n.id),a=await c.courses.getCourses(),g=await c.content.getResources(),h=s.map(i=>{let r=null;return i.type==="course"?r=a.find(u=>String(u.id)===String(i.targetId)):r=g.find(u=>String(u.id)===String(i.targetId)),r?{...r,id:i.id,targetId:i.targetId,type:i.type,title:r.title||r.label,instructor:r.instructor||r.author,image:r.image||r.thumbnail}:null}).filter(Boolean);j(h)}catch(s){console.error("Failed to load favorites",s)}finally{f(!1)}}})()},[n,c]);const v=async(t,s)=>{if(n&&confirm("إزالة من المفضلة؟"))try{const a=await c.toggleFavorite(n.id,t,s);(a==null?void 0:a.action)==="removed"&&j(g=>g.filter(h=>!(h.targetId===String(t)&&h.type===s)))}catch(a){console.error("Error toggling favorite",a)}};if($)return e.jsx(_,{fullScreen:!0});const C=[{id:"all",label:"الكل",icon:z,count:o.length},{id:"course",label:"الدورات",icon:w,count:o.filter(t=>t.type==="course").length},{id:"audio",label:"المقاطع الصوتية",icon:k,count:o.filter(t=>t.type==="audio").length},{id:"document",label:"المستندات",icon:S,count:o.filter(t=>t.type==="document").length}],b=l==="all"?o:o.filter(t=>t.type===l),y={course:w,audio:k,document:S},N={course:"from-emerald-500 to-teal-600",audio:"from-violet-500 to-purple-600",document:"from-amber-500 to-orange-600"};return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"المفضلة"}),e.jsx("p",{className:"text-gray-300",children:"محتواك المحفوظ للرجوع إليه لاحقاً"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"بحث...",className:"bg-white/5 border border-white/10 rounded-xl py-2 pr-10 pl-4 text-white placeholder-gray-400 focus:outline-none focus:border-emerald-500 w-48"})]}),e.jsxs("div",{className:"flex bg-white/5 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded-lg transition-colors ${x==="grid"?"bg-emerald-500 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(V,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-lg transition-colors ${x==="list"?"bg-emerald-500 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(D,{className:"w-5 h-5"})})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:C.map(t=>e.jsxs("button",{onClick:()=>I(t.id),className:`glass-panel p-4 rounded-2xl flex items-center gap-4 transition-all ${l===t.id?"border-emerald-500/50 bg-emerald-500/10":"hover:bg-white/5"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${l===t.id?"bg-emerald-500":"bg-white/10"}`,children:e.jsx(t.icon,{className:`w-5 h-5 ${l===t.id?"text-white":"text-gray-400"}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`font-medium ${l===t.id?"text-white":"text-gray-300"}`,children:t.label}),e.jsxs("p",{className:"text-sm text-gray-400",children:[t.count," عنصر"]})]})]},t.id))}),x==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(t=>{const s=y[t.type];return e.jsxs("div",{className:"glass-panel rounded-2xl overflow-hidden group hover:border-emerald-500/50 transition-all",children:[e.jsxs("div",{className:"relative h-40",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${N[t.type]} flex items-center justify-center`,children:e.jsx(s,{className:"w-4 h-4 text-white"})})}),e.jsx("button",{onClick:()=>v(t.targetId,t.type),className:"absolute top-3 left-3 p-2 rounded-lg bg-black/50 text-red-500 hover:bg-red-600 hover:text-white transition-colors",children:e.jsx(L,{className:"w-4 h-4 fill-current"})}),e.jsx("div",{className:"absolute bottom-3 left-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{className:"w-full py-2 bg-emerald-500 rounded-lg text-white text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"})," متابعة"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-400",children:t.instructor||t.author}),t.progress!==void 0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[e.jsx("span",{children:"التقدم"}),e.jsxs("span",{children:[t.progress,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full",style:{width:`${t.progress}%`}})})]})]})]},t.id)})}):e.jsx("div",{className:"space-y-3",children:b.map(t=>{const s=y[t.type];return e.jsxs("div",{className:"glass-panel p-4 rounded-2xl flex items-center gap-4 hover:border-emerald-500/50 transition-all",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden flex-shrink-0",children:e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${N[t.type]} flex items-center justify-center`,children:e.jsx(s,{className:"w-3 h-3 text-white"})}),e.jsx("h3",{className:"font-bold text-white",children:t.title})]}),e.jsx("p",{className:"text-sm text-gray-400",children:t.instructor||t.author}),t.progress!==void 0&&e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"text-xs text-emerald-400",children:[t.progress,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500 hover:text-white transition-colors",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>v(t.targetId,t.type),className:"p-2 rounded-lg bg-white/5 text-red-400 hover:bg-red-500/20 hover:text-red-500 transition-colors",children:e.jsx(A,{className:"w-5 h-5"})})]})]},t.id)})})]})};export{J as default};
