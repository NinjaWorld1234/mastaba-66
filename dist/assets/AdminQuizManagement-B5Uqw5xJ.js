import{c as A,r as i,b as o,w as q,C as z,j as e,X as D}from"./index-DXwXC5bI.js";import{C as M}from"./clock-dNg_BPVF.js";import{P as O}from"./plus-DdFNVHZn.js";import{S as P}from"./square-pen-Byg7Xb4z.js";import{T as w}from"./trash-2-D8rKlfQa.js";import{S as $}from"./save-Ck_58_AO.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],L=A("circle-alert",F),H=()=>{var g,b,j;const[c,N]=i.useState([]),[v,d]=i.useState(!1),[x,h]=i.useState(null),[u,y]=i.useState([]),[r,a]=i.useState({title:"",courseId:"",questions:[],passingScore:70,afterEpisodeIndex:3}),[l,m]=i.useState({text:"",options:["","","",""],correctAnswer:0});i.useEffect(()=>{p()},[]);const p=async()=>{const t=await o.getQuizzes();N(t);const s=await o.getCourses();y(s)},S=t=>{confirm("هل أنت متأكد من حذف هذا الاختبار؟")&&(o.deleteQuiz(t),p())},C=t=>{h(t.id),a({title:t.title,courseId:t.courseId,questions:t.questions,passingScore:t.passingScore,afterEpisodeIndex:t.afterEpisodeIndex}),d(!0)},k=()=>{var s;if(!l.text||(s=l.options)!=null&&s.some(n=>!n))return;const t={id:Date.now(),text:l.text||"",textEn:l.text||"",options:l.options,optionsEn:l.options,correctAnswer:l.correctAnswer||0};a({...r,questions:[...r.questions||[],t]}),m({text:"",options:["","","",""],correctAnswer:0})},I=t=>{const s=[...r.questions||[]];s.splice(t,1),a({...r,questions:s})},Q=t=>{t.preventDefault(),x?o.updateQuiz(x,r):o.addQuiz({id:Date.now().toString(),title:r.title||"اختبار جديد",titleEn:r.title||"New Quiz",courseId:r.courseId||"1",questions:r.questions||[],passingScore:r.passingScore||70}),d(!1),h(null),a({title:"",courseId:"",questions:[],passingScore:70,afterEpisodeIndex:3}),p()},E=[{label:"إجمالي الاختبارات",value:c.length.toString(),icon:q,color:"from-emerald-500 to-teal-600"},{label:"إجمالي الأسئلة",value:c.reduce((t,s)=>{var n;return t+(((n=s.questions)==null?void 0:n.length)||0)},0).toString(),icon:L,color:"from-blue-500 to-cyan-600"},{label:"معدل النجاح",value:"78%",icon:z,color:"from-violet-500 to-purple-600"},{label:"متوسط الوقت",value:"25 د",icon:M,color:"from-amber-500 to-orange-600"}];return e.jsxs("div",{className:"animate-fade-in space-y-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"إدارة الاختبارات"}),e.jsx("p",{className:"text-gray-300",children:"إنشاء وإدارة الاختبارات والتقييمات"})]}),e.jsxs("button",{onClick:()=>{h(null),a({title:"",courseId:u.length>0?u[0].id:"",questions:[],passingScore:70,afterEpisodeIndex:3}),d(!0)},className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-bold hover:opacity-90 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"اختبار جديد"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:E.map((t,s)=>e.jsx("div",{className:"glass-panel p-5 rounded-2xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${t.color} flex items-center justify-center`,children:e.jsx(t.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.value}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.label})]})]})},s))}),e.jsx("div",{className:"glass-panel rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10 bg-white/5",children:[e.jsx("th",{className:"text-right py-4 px-6 text-gray-300 font-medium",children:"الاختبار"}),e.jsx("th",{className:"text-right py-4 px-6 text-gray-300 font-medium",children:"الأسئلة"}),e.jsx("th",{className:"text-right py-4 px-6 text-gray-300 font-medium",children:"درجة النجاح"}),e.jsx("th",{className:"text-right py-4 px-6 text-gray-300 font-medium",children:"إجراءات"})]})}),e.jsxs("tbody",{children:[c.map(t=>{var s;return e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:t.title}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Course ID: ",t.courseId]})]})}),e.jsx("td",{className:"py-4 px-6 text-white",children:((s=t.questions)==null?void 0:s.length)||0}),e.jsxs("td",{className:"py-4 px-6 text-white",children:[t.passingScore,"%"]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(t),className:"p-2 rounded-lg bg-white/5 text-gray-400 hover:text-white",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(t.id),className:"p-2 rounded-lg bg-white/5 text-gray-400 hover:text-red-400",children:e.jsx(w,{className:"w-4 h-4"})})]})})]},t.id)}),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-8 text-center text-gray-400",children:"لا توجد اختبارات حالياً"})})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-[#0a1815] border border-white/10 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto custom-scrollbar relative",children:[e.jsx("button",{onClick:()=>d(!1),className:"absolute left-4 top-4 text-gray-400 hover:text-white",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:x?"تعديل اختبار":"إضافة اختبار جديد"}),e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"عنوان الاختبار"}),e.jsx("input",{required:!0,value:r.title,onChange:t=>a({...r,title:t.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"الدورة التدريبية"}),e.jsxs("select",{required:!0,value:r.courseId,onChange:t=>a({...r,courseId:t.target.value}),className:"w-full bg-[#0a1815] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500 appearance-none",children:[e.jsx("option",{value:"",children:"اختر الدورة..."}),u.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"يظهر بعد المحاضرة رقم"}),e.jsx("input",{type:"number",required:!0,min:"0",value:r.afterEpisodeIndex,onChange:t=>a({...r,afterEpisodeIndex:parseInt(t.target.value)}),className:"w-full bg-[#0a1815] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500"})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-white mb-4",children:["الأسئلة (",(g=r.questions)==null?void 0:g.length,")"]}),e.jsx("div",{className:"space-y-4 mb-4 max-h-60 overflow-y-auto pr-2",children:(b=r.questions)==null?void 0:b.map((t,s)=>e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl flex justify-between items-center group",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:t.text}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["الإجابة الصحيحة: ",t.options[t.correctAnswer]]})]}),e.jsx("button",{type:"button",onClick:()=>I(s),className:"p-2 text-red-400 hover:bg-white/10 rounded-lg",children:e.jsx(w,{className:"w-4 h-4"})})]},s))}),e.jsxs("div",{className:"bg-white/5 p-5 rounded-xl border border-white/10",children:[e.jsx("h5",{className:"text-emerald-400 font-bold mb-4 text-sm",children:"إضافة سؤال جديد"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{placeholder:"نص السؤال",value:l.text,onChange:t=>m({...l,text:t.target.value}),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-white text-sm"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(j=l.options)==null?void 0:j.map((t,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{placeholder:`الخيار ${s+1}`,value:t,onChange:n=>{const f=[...l.options||[]];f[s]=n.target.value,m({...l,options:f})},className:`flex-1 bg-black/20 border ${l.correctAnswer===s?"border-emerald-500":"border-white/10"} rounded-lg px-3 py-2 text-white text-sm`}),e.jsx("input",{type:"radio",name:"correctAnswer",checked:l.correctAnswer===s,onChange:()=>m({...l,correctAnswer:s}),className:"mt-3"})]},s))}),e.jsx("button",{type:"button",onClick:k,className:"w-full py-2 bg-emerald-600/50 hover:bg-emerald-600 rounded-lg text-white text-sm font-bold transition-colors",children:"+ إضافة السؤال"})]})]})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-emerald-600 hover:bg-emerald-500 rounded-xl text-white font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{children:x?"حفظ التعديلات":"إنشاء الاختبار"})]})]})]})]})})]})};export{H as default};
